<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>แบบทดสอบการเลือกสวิตช์ไฟ</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #74ebd5, #9face6);
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    h2 { margin-top: 0; }

    .section { display: none; }
    .section.active { display: block; }

    label { display: block; margin-top: 10px; }
    input, select, button { margin-top: 5px; padding: 8px; }

    .center { text-align: center; }

    .images { display:flex; justify-content:space-around; margin:20px 0; }
    .images img { width:45%; border:1px solid #ccc; border-radius:6px; }
    .switches button { width:45%; margin:10px; }
  </style>
</head>
<body>
<div class="container">

  <h1 class="center">แบบสำรวจการใช้งานสวิตช์ไฟ</h1>

  <!-- ส่วนที่ 1 ข้อมูลผู้เข้าทดสอบ -->
  <div id="section1" class="section active">
    <h2>ส่วนที่ 1 ข้อมูลผู้เข้าทดสอบ</h2>

    <label>ชื่อเล่น <input type="text" id="name"></label>

    <label>เพศ
      <select id="gender">
        <option value="">-- เลือก --</option>
        <option>ชาย</option>
        <option>หญิง</option>
        <option>อื่น ๆ</option>
      </select>
    </label>

    <label>ช่วงอายุ
      <select id="age">
        <option value="">-- เลือก --</option>
        <option>ต่ำกว่า 20 ปี</option>
        <option>20–22 ปี</option>
        <option>23–25 ปี</option>
        <option>มากกว่า 25 ปี</option>
      </select>
    </label>

    <label>สถานภาพในมหาวิทยาลัย
      <select id="status">
        <option>นักศึกษา</option>
        <option>อาจารย์</option>
        <option>บุคลากร</option>
      </select>
    </label>

    <label>เคยใช้งานบริเวณตึก 12 ชั้นหรือไม่
      <select id="experience">
        <option>เคย</option>
        <option>ไม่เคย</option>
      </select>
    </label>

    <button onclick="goToPlace()">ถัดไป</button>
  </div>

  <!-- ส่วนที่ 2 แนะนำสถานที่ -->
  <div id="section2_place" class="section center">
    <h2>แนะนำสถานที่</h2>

    <p>
      การทดสอบนี้เป็นการจำลองสถานการณ์การใช้งานสวิตช์ไฟ
      ภายในอาคารเรียน <strong> ตึก 12 ชั้น </strong><br>
      กรุณาศึกษาตำแหน่งไฟและสวิตช์จากภาพด้านล่าง
    </p>

    <div class="images">
      <img src="building12.png" alt="แผนผังตึก 12 ชั้น">
    </div>

    <button onclick="goToInstruction()">เริ่มการทดสอบ</button>
  </div>

  <!-- ส่วนที่ 3 คำแนะนำ -->
  <div id="section3_intro" class="section center">
    <h2>คำแนะนำ</h2>
    <p>เลือกสวิตช์ไฟที่ใช้เปิดไฟในตำแหน่งที่กำหนด <strong>จำนวนทั้งหมด 4 ข้อ</strong></p>
    <p>เริ่มทดสอบใน <span id="countdown">5</span></p>
  </div>

  <!-- ส่วนที่ 4 คำถาม -->
  <div id="section4_test" class="section center">
    <h2 id="questionText"></h2>

    <div class="images">
      <img id="imgA">
      <img id="imgB">
    </div>

    <div class="switches">
      <button onclick="answer(1)">สวิตช์ที่ 1</button>
      <button onclick="answer(2)">สวิตช์ที่ 2</button>
      <button onclick="answer(3)">สวิตช์ที่ 3</button>
      <button onclick="answer(4)">สวิตช์ที่ 4</button>
    </div>
  </div>

  <!-- ส่วนที่ 5 ผลลัพธ์ -->
  <div id="section5_result" class="section center">
    <h2>ผลการทดสอบ</h2>
    <div id="result"></div>
  </div>

</div>

<script>
  let questions = [
    { text: 'ข้อที่ 1: ถ้าอยากเปิดไฟตำแหน่ง A ต้องกดสวิตช์ใด', img1: 'A1.png', img2: 'A2.png' },
    { text: 'ข้อที่ 2: ถ้าอยากเปิดไฟตำแหน่ง B ต้องกดสวิตช์ใด', img1: 'B1.png', img2: 'B2.png' },
    { text: 'ข้อที่ 3: ถ้าอยากเปิดไฟตำแหน่ง C ต้องกดสวิตช์ใด', img1: 'C1.png', img2: 'C2.png' },
    { text: 'ข้อที่ 4: ถ้าอยากเปิดไฟตำแหน่ง D ต้องกดสวิตช์ใด', img1: 'D1.png', img2: 'D2.png' }
  ];

  // สุ่มคำถาม (โอกาสเท่ากัน)
  questions = questions.sort(() => Math.random() - 0.5);

  let current = 0;
  let startTime;
  let times = [];

  function goToPlace() {
    section1.classList.remove('active');
    section2_place.classList.add('active');
  }

  function goToInstruction() {
    section2_place.classList.remove('active');
    section3_intro.classList.add('active');

    let c = 5;
    const cd = document.getElementById('countdown');
    const t = setInterval(() => {
      c--;
      cd.textContent = c;
      if (c === 0) {
        clearInterval(t);
        startTest();
      }
    }, 1000);
  }

  function startTest() {
    section3_intro.classList.remove('active');
    section4_test.classList.add('active');
    loadQuestion();
  }

  function loadQuestion() {
    const q = questions[current];
    questionText.textContent = q.text;
    imgA.src = q.img1;
    imgB.src = q.img2;
    startTime = Date.now();
  }

  function answer(choice) {
    const time = ((Date.now() - startTime) / 1000).toFixed(2);
    times.push({ question: current + 1, choice, time });
    current++;

    if (current < questions.length) {
      loadQuestion();
    } else {
      showResult();
    }
  }

  function showResult() {
    section4_test.classList.remove('active');
    section5_result.classList.add('active');

    let html = '';
    times.forEach(t => {
      html += `ข้อ ${t.question} เลือกสวิตช์ ${t.choice} ใช้เวลา ${t.time} วินาที<br>`;
    });
    result.innerHTML = html;
  }
</script>

</body>
</html>

